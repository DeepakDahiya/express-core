# Copyright 2023 The Chromium Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/rust/cargo_crate.gni")

cargo_crate("lib") {
  crate_name = "futures_util"
  epoch = "0.3"
  crate_type = "rlib"

  # Only for usage from third-party crates. Add the crate to
  # third_party.toml to use it from first-party code.
  visibility = [ "//express/third_party/rust/*" ]
  crate_root = "crate/src/lib.rs"
  sources = [
    "//express/third_party/rust/futures_util/v0_3/crate/benches/bilock.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/benches/flatten_unordered.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/benches/futures_unordered.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/benches/select.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/build.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/no_atomic_cas.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/abortable.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/async_await/join_mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/async_await/mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/async_await/pending.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/async_await/poll.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/async_await/random.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/async_await/select_mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/async_await/stream_select_mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/compat/compat01as03.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/compat/compat03as01.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/compat/executor.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/compat/mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/fns.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/abortable.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/either.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/future/catch_unwind.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/future/flatten.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/future/fuse.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/future/map.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/future/mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/future/remote_handle.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/future/shared.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/join.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/join_all.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/lazy.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/maybe_done.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/option.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/pending.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/poll_fn.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/poll_immediate.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/ready.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/select.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/select_all.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/select_ok.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/try_future/into_future.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/try_future/mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/try_future/try_flatten.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/try_future/try_flatten_err.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/try_join.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/try_join_all.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/try_maybe_done.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/future/try_select.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/allow_std.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/buf_reader.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/buf_writer.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/chain.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/close.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/copy.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/copy_buf.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/copy_buf_abortable.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/cursor.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/empty.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/fill_buf.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/flush.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/into_sink.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/line_writer.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/lines.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/read.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/read_exact.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/read_line.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/read_to_end.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/read_to_string.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/read_until.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/read_vectored.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/repeat.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/seek.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/sink.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/split.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/take.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/window.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/write.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/write_all.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/write_all_vectored.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/io/write_vectored.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/lib.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/lock/bilock.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/lock/mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/lock/mutex.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/never.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/sink/buffer.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/sink/close.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/sink/drain.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/sink/err_into.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/sink/fanout.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/sink/feed.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/sink/flush.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/sink/map_err.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/sink/mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/sink/send.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/sink/send_all.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/sink/unfold.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/sink/with.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/sink/with_flat_map.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/abortable.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/empty.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/futures_ordered.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/futures_unordered/abort.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/futures_unordered/iter.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/futures_unordered/mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/futures_unordered/ready_to_run_queue.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/futures_unordered/task.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/iter.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/once.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/pending.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/poll_fn.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/poll_immediate.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/repeat.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/repeat_with.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/select.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/select_all.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/select_with_strategy.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/all.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/any.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/buffer_unordered.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/buffered.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/catch_unwind.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/chain.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/chunks.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/collect.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/concat.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/count.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/cycle.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/enumerate.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/filter.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/filter_map.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/flatten.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/flatten_unordered.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/fold.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/for_each.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/for_each_concurrent.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/forward.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/fuse.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/into_future.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/map.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/next.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/peek.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/ready_chunks.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/scan.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/select_next_some.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/skip.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/skip_while.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/split.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/take.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/take_until.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/take_while.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/then.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/unzip.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/stream/zip.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/and_then.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/into_async_read.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/into_stream.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/or_else.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_buffer_unordered.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_buffered.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_chunks.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_collect.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_concat.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_filter.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_filter_map.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_flatten.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_flatten_unordered.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_fold.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_for_each.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_for_each_concurrent.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_next.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_skip_while.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_take_while.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/try_stream/try_unfold.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/stream/unfold.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/task/mod.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/task/spawn.rs",
    "//express/third_party/rust/futures_util/v0_3/crate/src/unfold_state.rs",
  ]
  inputs = [ "//express/third_party/rust/futures_util/v0_3/crate/README.md" ]

  # Unit tests skipped. Generate with --with-tests to include them.
  build_native_rust_unit_tests = false
  edition = "2018"
  cargo_pkg_version = "0.3.27"
  cargo_pkg_name = "futures-util"
  cargo_pkg_description =
      "Common utilities and extension traits for the futures-rs library."
  library_configs -= [ "//build/config/compiler:chromium_code" ]
  library_configs += [ "//build/config/compiler:no_chromium_code" ]
  executable_configs -= [ "//build/config/compiler:chromium_code" ]
  executable_configs += [ "//build/config/compiler:no_chromium_code" ]
  deps = [
    "//express/third_party/rust/futures_channel/v0_3:lib",
    "//express/third_party/rust/futures_core/v0_3:lib",
    "//express/third_party/rust/futures_io/v0_3:lib",
    "//express/third_party/rust/futures_macro/v0_3:lib",
    "//express/third_party/rust/futures_sink/v0_3:lib",
    "//express/third_party/rust/futures_task/v0_3:lib",
    "//express/third_party/rust/pin_project_lite/v0_2:lib",
    "//express/third_party/rust/pin_utils/v0_1:lib",
    "//express/third_party/rust/slab/v0_4:lib",
    "//third_party/rust/memchr/v2:lib",
  ]
  features = [
    "alloc",
    "async-await",
    "async-await-macro",
    "channel",
    "futures-channel",
    "futures-io",
    "futures-macro",
    "futures-sink",
    "io",
    "memchr",
    "sink",
    "slab",
    "std",
  ]
}
